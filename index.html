<!DOCTYPE html>
<html lang="sv">

<head>
  <title>Undervisningsnummer</title>
  <link rel="stylesheet" href="style.css">
  <link rel="apple-touch-icon" sizes="180x180" href="media/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="media/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="media/favicon-16x16.png">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <sscanf variables='var.course, var.group' format="course=%s&group=%s">&page.query;</sscanf>
  <script src="script.js"></script>
</head>

<body>
  <div id="app">
    <h1>
      <a href=".">Undervisningsnummer</a>
    </h1>
    <p class="information">
      Sök efter en kurskod och studentgrupp för att få fram antalet undervisningstillfällen som har varit och som
      kommer
      att vara.
    </p>
    <form>
      <label for="course">Kurs:</label>
      <input autofocus type="text" name="course" value="&var.course;"
        onfocus="this.setSelectionRange(this.value.length, this.value.length)"
        oninput="this.value = this.value.toUpperCase()" placeholder="BML402, TATB01, TMES24">
      <label for="group">Grupp:</label>
      <input type="text" name="group" value="&var.group;" oninput="this.value = this.value.toUpperCase()"
        placeholder="BASL1, EMM1.B, D2.C">
      <label for="suggestions">Historik:</label>
      <div id="suggestions" style="grid-column: 2/3;"></div>
      <button type="submit" style="grid-column: 1/3;">Sök!</button>
    </form>

    <div id="resultDiv">
      <if variable-exists=var.course>
        <cgi script="cgi/FetchObjectIds.sh" course=&var.course;></cgi>
      </if>
    </div>
    <if variable-exists=var.course>
      <button id="urlButton" onclick="toggleUrls()">Visa url:er</button>
    </if>
    <footer>
      samak519@student.liu.se
    </footer>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      makeTable();
      courseInput = document.querySelector('input[name="course"]');
      groupInput = document.querySelector('input[name="group"]');
      showHistory(courseInput, groupInput);
      setTimeout(() => {
        storeHistory(courseInput, groupInput);
        showHistory(courseInput, groupInput);
      }, 600);
    });
  </script>


</body>

</html>